<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>购物车</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div class="container">
    <table class="table" cellpadding="0" cellspacing="0">
        <tr>
            <td class="selecbox">
                <input class="selected" type="checkbox"> 全选
            </td>
            <td class="icobox">

            </td>
            <td class="productname">
                商品名称
            </td>
            <td class="pricebox">
                单价
            </td>
            <td class="amount">
                数量
            </td>
            <td class="subtotal" style="color: black">
                小计
            </td>
            <td class="operate">
                操作
            </td>
        </tr>

        <tr>
            <td class="selecbox">
                <input class="selected" type="checkbox">&nbsp;&nbsp;
            </td>
            <td class="icobox">
                <img src="1.jpg" width="100" height="68"/>
            </td>
            <td class="productname">
               米家电磁炉
            </td>
            <td class="pricebox">
                299元
            </td>
            <td class="amount">
                <div class="countbox" id="1">
                    <span id="num-jian" class="num-jian">-</span>
                    <input type="text" class="input-num" id="input-num" value="0" />
                    <span id="num-jia" class="num-jia">+</span>
                </div>
            </td>
            <td class="subtotal">
                <div id="price1">299元</div>
            </td>
            <td class="operate">
                ×
            </td>
        </tr>

        <tr>
            <td class="selecbox">
                <input class="selected" type="checkbox">&nbsp;&nbsp;
            </td>
            <td class="icobox">
                <img src="2.jpg" width="100" height="68"/>
            </td>
            <td class="productname">
                12.5" 小米笔记本Air M3 4G 128G 银色
            </td>
            <td class="pricebox">
                3599元
            </td>
            <td class="amount">
                <div class="countbox" id="2">
                    <span id="num-jian" class="num-jian">-</span>
                    <input type="text" class="input-num" id="input-num" value="0" />
                    <span id="num-jia" class="num-jia">+</span>
                </div>
            </td>
            <td class="subtotal">
                <div id="price2">3599元</div>
            </td>
            <td class="operate">
                ×
            </td>
        </tr>

        <tr>
            <td class="selecbox">
                <input class="selected" type="checkbox">&nbsp;&nbsp;
            </td>
            <td class="icobox">
                <img src="3.jpg" width="100" height="68"/>
            </td>
            <td class="productname">
                小米净水器滤芯PP棉 白色
            </td>
            <td class="pricebox">
                <div id="price1">59元</div>
            </td>
            <td class="amount">
                <div class="count">
                    <div class="countbox" id="3">
                    <span id="num-jian" class="num-jian">-</span>
                    <input type="text" class="input-num" id="input-num" value="0" />
                    <span id="num-jia" class="num-jia">+</span>
                    </div>
                </div>
            </td>
            <td class="subtotal">
                <div id="price3">59元</div>
            </td>
            <td class="operate">
                ×
            </td>
        </tr>
    </table>

<div class="footer">
<div class="left-footer">
    <div class="continueShopping">
        <a href="">继续购物</a>
    </div>
    <div class="totaled">
        共<span id="total-num1" class="total-num">3</span> 件商品，已选择<span id="slectnum" class="alreadySelect">0</span>件
    </div>
</div>
<div class="right-footer">
    <div class="totalPricebox">
        合计：<span class="totalPrice">3559</span>元
    </div>
    <div class="settleSccounts">
      <a href="">去结算</a>
    </div>
</div>
</div>
</div>
</body>
</html>

<script>
        //复选框被单击
        var selectnum =0;
        var select = document.getElementsByClassName('selected');
            select[0].onclick=function(){
            console.log(select[0].checked);
            if (select[0].checked == true) {//全选被点击时，其他的都打勾
                for (var i = 1; i < select.length; i++) {
                    select[i].checked = true;
                    document.getElementById('slectnum').innerText=i;
                    selectnum=i;
                }
            }
        }
        for(var j=1;j<select.length;j++) {
            select[j].onclick = function () {
                if (this.checked == true) {
                    selectnum = selectnum + 1;
                }
                else {
                    selectnum = selectnum - 1;
                }
                document.getElementById('slectnum').innerText = selectnum;
            }
        }
    /*
    //商品数量加减
    var num_jia = document.getElementById("num-jia");
    var num_jian = document.getElementById("num-jian");
    var input_num = document.getElementById("input-num");

    num_jia.onclick = function() {

        input_num.value = parseInt(input_num.value) + 1;
    }

    num_jian.onclick = function() {
        if(input_num.value <= 0) {
            input_num.value = 0;
        } else {
            input_num.value = parseInt(input_num.value) - 1;
        }

    }*/
    var numJia = document.getElementsByClassName('num-jia');
    var numJian = document.getElementsByClassName('num-jian');
        for(i=0;i<numJia.length;i++){
            numJia[i].onclick=function () {
                jia(this);
            }
        }
        function jia(ev) {
          var inputnum=  ev.previousElementSibling;
            var id = ev.parentNode.id;
         //   var unitprice = ev.parentNode.parentNode.previousSibling;
       //     console.log(unitprice);
            inputnum.value = parseInt(inputnum.value) + 1;
      //      getsubtotal(unitprice,inputnum.value,id);
        }

        for(i=0;i<numJian.length;i++) {
            numJian[i].onclick = function () {
              jian(this);
        }
        function jian(ev) {
            var inputnum=  ev.nextElementSibling;
            if (inputnum.value <= 0) {
                inputnum.value = 0;
            } else {
                inputnum.value = parseInt(inputnum.value) - 1;
            }
        }
        }
        function getsubtotal(unitprice,goodsnum,index) {
            var price = document.getElementById('price'+String(index));
            var pricecount = parseInt(goodsnum) * parseFloat(unitprice) ;
            price.innerText = pricecount + '元';

        }


</script>